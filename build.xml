<?xml version="1.0" encoding="UTF-8"?>

<project name="simplerisk-addons" default="dist">

    <input propertyname="simpleRiskInstallation">Enter Simple Risk Installation dir:</input>

    <echo>Installing addons to: ${simpleRiskInstallation}</echo>

    <!-- ============================================  -->
    <!-- Target: prepare                               -->
    <!-- ============================================  -->
    <target name="prepare">
        <echo msg="Making directory ${simpleRiskInstallation}/extras" />
        <mkdir dir="${simpleRiskInstallation}/extras" />
        <echo msg="Making directory ${simpleRiskInstallation}/extras/authentication" />
        <mkdir dir="${simpleRiskInstallation}/extras/authentication" />
    </target>

    <!-- ============================================  -->
    <!-- Target: build                                 -->
    <!-- ============================================  -->
    <target name="build">
        <composer command="install" composer="/usr/local/bin/composer">
        <arg value="--working-dir=./src/extras/authentication"/>
        <arg value="--no-dev"/>
        <arg value="--no-interaction"/>
        </composer>
    </target>


    <!-- ============================================  -->
    <!-- (DEFAULT)  Target: dist                       -->
    <!-- ============================================  -->
    <target name="dist" depends="build">
        <echo msg="Coping files..." />
        <copy todir="${simpleRiskInstallation}/extras/authentication"
            overwrite="true" includeemptydirs="true">
            <fileset dir="./src/extras/authentication">
                <include name="**/*" />
            </fileset>
        </copy>
    </target>
</project>